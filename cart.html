<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <title>shopping cart page</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="css/cart.css">
</head>

<body>
  <h1>cart page</h1>
 
 <nav>
  <ul>
    <li>
       <a href="index.html">Home</a>
    </li>
     <li>
      <a href="terms.html">Terms and Services</a>
    </li>
    
    <li>
      <a href="commission.html">Commission</a>
    </li>
    <li>
      <a href="cart.html">Shopping Cart</a>
    </li>
  </ul>
 </nav>

 

 <div class="cartTable">

   <table id="loaded-items">
       
            <tr>
                <th>ID</th>
                <th>Type</th>
                <th>Price</th>
                <th>Description</th>
                <th>Delete</th>
            </tr>
    
    </table>


 </div>
 

    <script>

       function loadCartItems() {
        let xhr = new XMLHttpRequest();

         xhr.addEventListener("load", function () {
            let data = JSON.parse(xhr.responseText);
            let table = document.getElementById("loaded-items");

       
            while (table.rows.length > 1) {
                  table.deleteRow(1);
                }

       
            data.forEach(function (item) {
              let row = table.insertRow();
              let cellId = row.insertCell();
              let cellType = row.insertCell();
              let cellPrice = row.insertCell();
              let cellDescription = row.insertCell();
              let cellAction = row.insertCell();

             cellId.textContent = item.id;
             cellType.textContent = item.type; 
             cellDescription.textContent = item.description; 
             cellPrice.textContent = `$${item.price}`;

            
            let btn = document.createElement("button");
            btn.textContent = "Delete";
            btn.onclick = function () { deleteItem(item.id); };
            cellAction.appendChild(btn);
        });

    });

    xhr.open("GET", "https://27izq2bl24.execute-api.us-east-2.amazonaws.com/cart");
    xhr.send();
}

  function deleteItem(id) {
     let xhr = new XMLHttpRequest();
      xhr.open("DELETE", `https://27izq2bl24.execute-api.us-east-2.amazonaws.com/cart/${id}`);
      xhr.addEventListener("load", function () {
        loadCartItems(); 
         });
     xhr.send();
    }

// Automatically load items when page loads
  window.onload = loadCartItems;


</script>

 

</body>

</html>