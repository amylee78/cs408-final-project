<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <title>landing page</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="css/commission.css">
</head>

<body>
  <h1>commission page</h1>
 
  <nav>
  <ul>
    <li>
       <a href="index.html">Home</a>
    </li>
     <li>
      <a href="terms.html">Terms and Services</a>
    </li>
    
    <li>
      <a href="commission.html">Commission</a>
    </li>
    <li>
      <a href="cart.html">Shopping Cart</a>
    </li>
  </ul>
 </nav>



    <table id="lineart" >
     <tr>
      <th colspan="3"> Lineart</th>
     </tr>

      <tr>
       <th>Type</th>
       <th>description</th>
       <th>Price</th>
      </tr>

      <tr>
        <th>headshot</th>
       <td >to be written</td>
       <td>$15</td>
      </tr>
      <tr>
         <th>bust</th>
       <td >to be written</td>
       <td>$20</td>
      </tr>
      <tr>
         <th>full body</th>
       <td >to be written</td>
       <td>$25</td>
      </tr>
    </table>

    <table id="color"  >
     <tr>
      <th colspan="3"> Color</th>
     </tr>

      <tr>
       <th>Type</th>
       <th>description</th>
       <th>Price</th>
      </tr>

      <tr>
      <th>headshot</th>
       <td >to be written</td>
       <td>$30</td>
      </tr>
      <tr>
      <th>bust</th>
       <td >to be written</td>
       <td>$40</td>
      </tr>
      <tr>
       <th>full body</th>
       <td >to be written</td>
       <td>$50</td>
      </tr>

       <tr>
       <th> + 1 full body</th>
       <td >to be written</td>
       <td>$40</td>
      </tr>
    </table>

    <table id="lineless"  >
     <tr>
      <th colspan="3"> lineless</th>
     </tr>

      <tr>
       <th>Type</th>
       <th>description</th>
       <th>Price</th>
      </tr>

      <tr>
        <th>headshot</th>
       <td >to be written</td>
       <td>$45</td>
      </tr>
      <tr>
         <th>bust</th>
       <td >to be written</td>
       <td>$65</td>
      </tr>
      <tr>
         <th>full body</th>
       <td >to be written</td>
       <td>$90</td>
      </tr>

      <tr>
       <th> + 1 full body</th>
       <td >to be written</td>
       <td>$40</td>
      </tr>
    </table>

    <table id="design"  >
     <tr>
      <th colspan="3"> Character design</th>
     </tr>

      <tr>
       <th>Type</th>
       <th>description</th>
       <th>Price</th>
      </tr>

      <tr>
        <th>simple</th>
       <td >to be written</td>
       <td>$45</td>
      </tr>
      <tr>
        <th>semi-complex</th>
       <td >to be written</td>
       <td>$60</td>
      </tr>
      <tr>
        <th>complex</th>
       <td >to be written</td>
       <td>$90</td>
      </tr>

      <th>character sheet</th>
       <td >to be written</td>
       <td>$90</td>
      </tr>
    </table>

     <table id="scene"  >
     <tr>
      <th colspan="3">illustration</th>
     </tr>

      <tr>
       <th>Type</th>
       <th>description</th>
       <th>Price</th>
      </tr>

      <tr>
      <th>simple</th>
       <td >to be written</td>
       <td>$75</td>
      </tr>
      <tr>
         <th>semi-complex</th>
       <td >to be written</td>
       <td>$100</td>
      </tr>
      <tr>
         <th>complex</th>
       <td >to be written</td>
       <td>$150</td>
      </tr>

      <th>Paintery</th>
       <td >to be written</td>
       <td>$200</td>
      </tr>
    </table>


    <table id="watercolor">
     <tr>
      <th colspan="3"> Watercolor pet portrait</th>
     </tr>

      <tr>
       <th>Type</th>
       <th>description</th>
       <th>Price</th>
      </tr>

      <tr>
      <th>headshot</th>
       <td >to be written</td>
       <td>$60</td>
      </tr>
      <tr>
       <th>bust</th>
       <td >to be written</td>
       <td>$90</td>
      </tr>
      <tr>
        <th>full body</th>
       <td >to be written</td>
       <td>$120</td>
      </tr>

      <tr>
       <th> + 1 full body</th>
       <td >to be written</td>
       <td>$40</td>
      </tr>
    </table>



     <div class="section2">
          <!-- This form field allows user to enter ID, Name, and Price -->
     <h2>Commission form</h2>
     <p> fill out the form here. to be written </p>
     <form>
        
       <label for="new-name">  Name: </label>
       <input type="text" id="new-name" name="name"  placeholder=" write your name here" >
       <br> <br>
        <label for="new-email">Email: </label>
       <input type="email" id="new-email" name="email" placeholder="enter your email here">
       <br> <br>
         <select id="commission-type">
        <option value="">Select a commission type</option>
         </select>
       <br><br>
        <label for="new-description">Description: </label>
        <br><br>
      <textarea id="new-description" name="description" placeholder="write what I would like to draw here."></textarea>
      <br> <br>


     <button type="button" id="send-data">Add to cart</button>
    </div>


 <script>
    function loadCommissionTypes() {
     const xhr = new XMLHttpRequest();
     xhr.open("GET", "https://6ip75gssuf.execute-api.us-east-2.amazonaws.com/price");
    
      xhr.onload = function() {
        if (xhr.status === 200) {
            const items = JSON.parse(xhr.responseText);
            items.sort((a, b) => b.type.localeCompare(a.type)); //sorts from z to a
            
            const select = document.getElementById("commission-type");
          
            
            items.forEach(item => {
                const option = document.createElement("option");
                option.value = item.type;
                option.textContent = `${item.type} â€” $${item.price}`;
                select.appendChild(option);
            });
        } else {
            alert("Error loading commission prices");
        }
    };

    xhr.onerror = function() {
        alert("Network error while loading commission prices");
    };

    xhr.send();
}

 document.getElementById("send-data").onclick = function() {
  
    const name = document.getElementById("new-name").value.trim();
    const email = document.getElementById("new-email").value.trim();
    const type = document.getElementById("commission-type").value;
    const description = document.getElementById("new-description").value.trim();


    // Generates a unique ID
     let id = crypto.randomUUID().toString().substring(0, 8)

   

    const xhr = new XMLHttpRequest();
    xhr.open("PUT", "https://27izq2bl24.execute-api.us-east-2.amazonaws.com/cart");
    xhr.setRequestHeader("Content-Type", "application/json");

     xhr.addEventListener("load", function () {
        alert("Your inquiry has been submitted!");
        
    });

    
    if (!name || !email || !type || !description) {
        alert("Please fill in all fields before submitting.");
        return;
    }

       if (!email.includes("@") || !email.includes(".com")  )
    {
       alert("email must contain a @ and a .com , please try again")
    }

      xhr.send(JSON.stringify({
        id: id,
        name: name,
        email: email,
        type: type,        
        description: description
    }));

    
    document.getElementById("new-name").value = "";
    document.getElementById("new-email").value = "";
    document.getElementById("commission-type").value = "";
    document.getElementById("new-description").value = "";

    
};

// Load commission types when page loads
window.onload = loadCommissionTypes;
 </script>


</body>

</html>